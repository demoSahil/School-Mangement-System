@using Syncfusion.EJ2
<!-- Syncfusion scripts -->
<script src="~/Scripts/ej2.min.js"></script>
<!-- Syncfusion stylesheets -->
<link rel="stylesheet" href="~/Content/ej2/material.css" />
<main>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #myPieChart {
            border: 4px solid gray;
            border-radius: 20px;
            padding: 26px;
        }
    </style>
    <!--<h1> this is my dashboard </h1>-->

    <div id="canvas" style="display: block; box-sizing: border-box; height: 20rem; width: 30rem;">
        <canvas id="myPieChart" width="153" height="153"></canvas>
        <span> Total Teachers And Students</span>
    </div>
    <script>

        //Getting no. of students
        let studentsCount = 0;
        let teacherCount = 0;
        function GetStudentsCount() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/A_Students/Student/Index?getCount=true', false);


            xhr.onload = () => {
                if (xhr.status === 200 && xhr.readyState == xhr.DONE) {
                    studentsCount = JSON.parse(xhr.response);
                    alert(JSON.parse(xhr.response));
                }
                else {
                    alert("Error");
                }
            };

            xhr.send();

        }

        // Getting Total numbers of Teachers
        function GetTeachersCount() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/A_Teachers/Teacher/Index?getCount=true', false);


            xhr.onload = () => {
                if (xhr.status === 200 && xhr.readyState == xhr.DONE) {
                    teacherCount = JSON.parse(xhr.response);
                    alert(JSON.parse(xhr.response));
                }
                else {
                    alert("Error");
                }
            };

            xhr.send();

        }

        GetStudentsCount();
        GetTeachersCount();




        var data = {
            labels: ['Teachers', 'Students'],
            datasets: [{
                data: [teacherCount.count, studentsCount.count], // Sample student counts
                backgroundColor: [
                    'rgba(0, 0, 255, 0.5)',
                    'rgba(220, 100, 120, 0.5)'
                ]
            }]
        };

        // Render the pie chart
        var ctx = document.getElementById('myPieChart').getContext('2d');
        var myPieChart = new Chart(ctx, {
            type: 'pie',
            data: data,
            options: {
                title: {
                    display: true,
                    text: 'Teachers and Students'
                }
            }
        });
    </script>



</main>
